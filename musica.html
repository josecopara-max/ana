<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Para ti üé∂</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  min-height: 100vh;
  background: radial-gradient(circle at center, #2a083d, #0b0612 75%);
  background-size: 200% 200%;
  animation: backgroundMove 10s ease-in-out infinite;
  color: #e6d9ff;
  font-family: 'Segoe UI', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

@keyframes backgroundMove {
  0% { background-position: 50% 50%; }
  50% { background-position: 55% 45%; }
  100% { background-position: 50% 50%; }
}

.container {
  text-align: center;
  max-width: 700px;
  padding: 40px;
  z-index: 3;
}

.line {
  opacity: 0;
  margin-bottom: 25px;
  font-size: 1.4rem;
  transform: translateY(16px);
  transition: opacity 2s ease, transform 2s ease;
}
.line.show { opacity: 1; transform: translateY(0); }
.line.fade { opacity: 0; transform: translateY(-10px); }

#startBtn {
  margin-top: 30px;
  padding: 12px 22px;
  border-radius: 30px;
  border: 1px solid #9f6bff;
  background: none;
  color: #e6d9ff;
  cursor: pointer;
}

/* Overlay oscuro */
#fadeOverlay {
  position: fixed;
  inset: 0;
  background: black;
  opacity: 0;
  transition: opacity 1.5s ease;
  z-index: 4;
}
#fadeOverlay.show { opacity: 1; }

/* Mensaje final */
#finalMessage {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 2.3rem;
  text-align: center;
  color: #ffd700;
  opacity: 0;
  transition: opacity 2s ease;
  z-index: 6;
}
#finalMessage.show { opacity: 1; }

/* Confeti */
canvas {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 5;
}
</style>
</head>

<body>

<canvas id="confetti"></canvas>

<div class="container">
  <div class="line" id="l1">Pero ahora que no est√°s aqu√≠,<br>que me di cuenta de lo que perd√≠.</div>
  <div class="line" id="l2">Puede que no sea tan tarde pa' verte y decirte<br>que sigo toda loca por tu amor.</div>
  <div class="line" id="l3">Quiero decirte que lo siento,<br>que te echo de menos.</div>
  <div class="line" id="l4">Que de to' lo que ha pasa'o,<br>nena, yo me arrepiento.</div>
  <div class="line" id="l5">Te quiero todav√≠a,<br>no pienses que ya te di por perdida.</div>

  <button id="startBtn">üé∂ Iniciar</button>
</div>

<div id="fadeOverlay"></div>

<div id="finalMessage">
  ¬°Feliz cumplea√±os mi amor! ‚ù£Ô∏è<br>
  Te amo mucho
</div>

<audio id="audio">
  <source src="cancion.mp3" type="audio/mpeg">
</audio>

<script>
/* üéµ Letras */
const startBtn = document.getElementById("startBtn");
const audio = document.getElementById("audio");

const lyrics = [
  { id: "l1", show: 0, hide: 7 },
  { id: "l2", show: 8, hide: 16 },
  { id: "l3", show: 17, hide: 20 },
  { id: "l4", show: 21, hide: 25 },
  { id: "l5", show: 25, hide: 33 }
];

startBtn.onclick = () => {
  startBtn.style.display = "none";
  audio.play();
  lyrics.forEach(l => {
    const el = document.getElementById(l.id);
    setTimeout(() => el.classList.add("show"), l.show * 1000);
    setTimeout(() => el.classList.add("fade"), l.hide * 1000);
  });
};

/* üéâ CONFETI */
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

const particles = [];
const colors = ["#c79cff","#9f6bff","#ffffff","#b894ff"];
const gravity = 0.06;
const TOTAL = 260;

function createParticle(side) {
  const margin = canvas.width * 0.15;
  return {
    x: side === "left" ? Math.random()*margin : canvas.width - Math.random()*margin,
    y: Math.random()*canvas.height*0.6,
    size: Math.random()*3+2,
    speedX: side === "left" ? Math.random()*2.5+1 : -(Math.random()*2.5+1),
    speedY: Math.random()*-2.5,
    rotation: Math.random()*Math.PI,
    rotationSpeed:(Math.random()-0.5)*0.1,
    color: colors[Math.floor(Math.random()*colors.length)],
    life: 260
  };
}

function launchConfetti(){
  particles.length=0;
  for(let i=0;i<TOTAL;i++){
    particles.push(createParticle(i%2===0?"left":"right"));
  }
  animateConfetti();
}

function animateConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    p.x+=p.speedX;
    p.y+=p.speedY;
    p.speedY+=gravity;
    p.rotation+=p.rotationSpeed;
    p.life--;
    ctx.save();
    ctx.translate(p.x,p.y);
    ctx.rotate(p.rotation);
    ctx.fillStyle=p.color;
    ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size*1.8);
    ctx.restore();
  });
  for(let i=particles.length-1;i>=0;i--){
    if(particles[i].life<=0) particles.splice(i,1);
  }
  if(particles.length>0) requestAnimationFrame(animateConfetti);
}

/* üé¨ Final */
const overlay = document.getElementById("fadeOverlay");
const finalMessage = document.getElementById("finalMessage");

audio.onended = () => {
  overlay.classList.add("show");
  setTimeout(()=>{
    overlay.classList.remove("show");
    finalMessage.classList.add("show");
    launchConfetti(); // üí• CONFETI AQU√ç
  },2000);
};
</script>

</body>
</html>
